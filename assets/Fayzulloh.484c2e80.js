import{Q as T,a as B,b as F,c as P}from"./QItemLabel.8c38a0ab.js";import{G as W,r as i,q as $,a as j,at as w,J as s,T as c,N as _,M as r,L as m,I as v,al as g,V as A,K as x,X as G,t as J,ay as K,P as L,ah as I,O as S,R as X,S as U}from"./index.6907c00b.js";import{q as H,a as Y,c as Z,o as ee,d as V,e as R,u as C}from"./firebase.02bcd041.js";import{g as ae,r as le,u as te,a as se}from"./index.esm2017.601a6a60.js";const oe=["src"],ne=["src"],ue=["src"],ie=["src"],de={class:"text-grey-7"},pe={__name:"Fayzulloh",setup(ce){const q=W(),D=()=>{q.go(-1)},e=i();let d=i(!1);const o=i([]);$(()=>{const t=H(Z(V,"active"),Y("date"));ee(t,a=>{a.docChanges().forEach(l=>{let p=l.doc.data();if(p.id=l.doc.id,l.type==="added"&&(o.value.unshift(p),e.value=o.value[0]),l.type==="modified"){let k=o.value.findIndex(b=>b.id===p.id);console.log("modified",p),Object.assign(o.value[k],p),k===0&&(e.value=o.value[0])}if(l.type==="removed"){let k=o.value.findIndex(b=>b.id===p.id);o.value.splice(k,1),k===0&&(e.value=o.value[0])}})})});const N=i(null),E=ae(),M=async t=>{const a=le(E,`videos/${t.name}`);return await te(a,t),await se(a)};let y=j(()=>!q.currentRoute.value.fullPath.includes("/admin"));const Q=()=>{y?N.value.click():console.log("dnx")};let f=i(),h=i();const O=t=>{const a=t.target.files[0];if(a){const l=new FileReader;l.onload=async()=>{a.type.startsWith("image")?(f.value=null,h.value=l.result):a.type.startsWith("video")&&(h.value=null,f.value=await M(f.value=t.target.files[0]))},l.readAsDataURL(a)}z()};let n=i("");w(()=>{e.value&&(n.value=e.value.nickname)}),w(()=>{if(e.value&&n.value!==e.value.nickname){const t=R(V,"active",e.value.id);C(t,{nickname:n.value}).then(()=>{e.value.nickname=n.value}).catch(a=>{console.error("Error updating nickname:",a)})}});let u=i("");w(()=>{e.value&&(u.value=e.value.name)}),w(()=>{if(e.value&&u.value!==e.value.name){const t=R(V,"active",e.value.id);C(t,{name:u.value}).then(()=>{e.value.name=u.value}).catch(a=>{console.error("Error updating nickname:",a)})}});const z=async()=>{if(f.value||h.value){const t=R(V,"active","Fayz");await C(t,{image:f.value||h.value})}else console.log("zhdi"),setInterval(async()=>{await f.value,z()},1e3)};return(t,a)=>(s(),c(A,null,[_("div",{onClick:D,color:"primary",class:"backti"}," \u2190 "),r(T,{class:"q-ml-md lflex",padding:""},{default:m(()=>[e.value?(s(),x(B,{key:0,class:"mag"},{default:m(()=>[e.value.image.includes("https")?(s(),c("video",{key:1,class:"dodimga",loop:"",autoplay:"",muted:"",src:e.value.image},null,8,ne)):(s(),c("img",{key:0,class:"dodimga",src:e.value.image},null,8,oe))]),_:1})):g("",!0),e.value?(s(),x(B,{key:1,class:"fayz q-py-md"},{default:m(()=>[r(F,{avatar:"",top:"",onClick:Q},{default:m(()=>[_("div",{class:"image-wrapper",onMouseover:a[0]||(a[0]=l=>I(d)?d.value=!0:d=!0),onMouseleave:a[1]||(a[1]=l=>I(d)?d.value=!1:d=!1)},[r(G,{appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOut slow"},{default:m(()=>[J(r(L,{class:"camera-icon",name:"camera_alt"},null,512),[[K,v(d)]])]),_:1}),e.value.image.includes("https")?(s(),c("video",{key:1,class:"dodemg",loop:"",autoplay:"",muted:"",src:e.value.image},null,8,ie)):(s(),c("img",{key:0,class:"dodemg",src:e.value.image},null,8,ue))],32)]),_:1}),r(F,null,{default:m(()=>[r(P,{class:"text-subtitle1 column"},{default:m(()=>[_("div",null,[_("strong",null,S(e.value.nickname),1)]),_("span",de,S(e.value.name),1)]),_:1})]),_:1})]),_:1})):g("",!0),v(y)?(s(),c("button",{key:2,onClick:Q,class:"bit"},[X("Change pfp "),r(L,{class:"qicon",name:"camera_alt"})])):g("",!0),v(y)?(s(),x(U,{key:3,standout:"bg-teal text-white",class:"mai",modelValue:v(n),"onUpdate:modelValue":a[2]||(a[2]=l=>I(n)?n.value=l:n=l),label:"nick-name"},null,8,["modelValue"])):g("",!0),v(y)?(s(),x(U,{key:4,standout:"bg-teal text-white",class:"mai",modelValue:v(u),"onUpdate:modelValue":a[3]||(a[3]=l=>I(u)?u.value=l:u=l),label:"nick-name"},null,8,["modelValue"])):g("",!0)]),_:1}),v(y)?(s(),c("input",{key:0,type:"file",onChange:O,style:{display:"none"},ref_key:"imageInput",ref:N,accept:"image/*, video/*"},null,544)):g("",!0)],64))}};export{pe as default};
